import React from 'react'
import type { ColorValue } from 'react-native'
import Svg, { SvgProps } from 'react-native-svg'
import type { NumberProp } from 'react-native-svg'

import { colors } from '@zeal/uikit/colors'
import { useTextStyleInheritContext } from '@zeal/uikit/Text'

type Props = SvgProps & {
    children: React.ReactNode
    id?: string
    viewBox?: string
    width?: NumberProp
    height?: NumberProp
    color?: ColorValue
    fill?: string
    'aria-label'?: string
}

export const SvgIcon = ({
    children,
    viewBox,
    width,
    height,
    color,
    fill,
    'aria-label': ariaLabel,
    ...rest
}: Props) => {
    const textStylesContext = useTextStyleInheritContext()
    const selectedColour = color || colors[textStylesContext.color] || 'currentColor'

    return (
        <Svg
            style={{ flexShrink: 0 }}
            viewBox={viewBox}
            width={width}
            height={height}
            fill={fill || selectedColour}
            accessibilityLabel={ariaLabel}
            {...rest}
        >
            {children}
        </Svg>
    )
}
